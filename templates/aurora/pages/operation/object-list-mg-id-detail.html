{% extends 'aurora/elements/layouts/admin.html' %} {% load static %} {% block additional_css %} {% endblock %} {% block content %}{% load custom_filters %}
<div class="page-titles">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/index">Home</a></li>
    <li class="breadcrumb-item"><a href="javascript:void(0)">Operation</a></li>
    <li class="breadcrumb-item">
      <a href="{% url 'operation:object-list'%}">사물 관리</a>
    </li>
    <li class="breadcrumb-item">
      <a href="{% url 'operation:object-list-dynamic' object_type='mg_id' %}">mg_id 사물 관리</a>
    </li>
    <li class="breadcrumb-item active">
      <a href="{% url 'operation:object-list-mg-id-detail' mg_id=mg_id %}">mg_id detail</a>
    </li>
  </ol>
</div>
<!-- test -->
<!-- row -->
<div class="row">
  <div class="col-xl-3 col-sm-6">
    <div class="card">
      <div class="card-body">
        <div class="media align-items-center invoice-card">
          <div class="media-body">
            <h2 class="fs-38 text-black font-w600">mg_id</h2>
            <span class="fs-18">{{  mg_id }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xl-3 col-sm-6">
    <div class="card">
      <div class="card-body">
        <div class="media align-items-center invoice-card">
          <div class="media-body">
            <h2 class="fs-38 text-black font-w600">total scan count</h2>
            <span class="fs-18">{{total_count}}</span>
          </div>
          <span class="p-3 border ms-3 rounded-circle">
            <svg
              height="34px"
              width="34px"
              version="1.1"
              id="_x32_"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              viewBox="0 0 512 512"
              xml:space="preserve"
            >
              <style type="text/css">
                .st0 {
                  fill: #000000;
                }
              </style>
              <g>
                <path
                  class="st0"
                  d="M378.413,0H208.297h-13.168l-9.314,9.314L57.02,138.102l-9.314,9.314v13.176v265.514
                                            c0,47.36,38.527,85.895,85.895,85.895h244.812c47.353,0,85.881-38.535,85.881-85.895V85.896C464.294,38.528,425.766,0,378.413,0z
                                            M432.497,426.105c0,29.877-24.214,54.091-54.084,54.091H133.601c-29.87,0-54.084-24.214-54.084-54.091V160.591h83.717
                                            c24.884,0,45.063-20.178,45.063-45.07V31.804h170.116c29.87,0,54.084,24.214,54.084,54.092V426.105z"
                />
                <path
                  class="st0"
                  d="M162.94,251.968c-5.851,0-10.054,4.21-10.054,10.592v72.804c0,6.388,4.203,10.599,10.054,10.599
                                            c5.698,0,9.915-4.21,9.915-10.599V262.56C172.855,256.178,168.638,251.968,162.94,251.968z"
                />
                <path
                  class="st0"
                  d="M265.621,251.968c-5.977,0-9.244,3.261-12.219,10.326l-19.299,44.547h-0.545l-19.69-44.547
                                            c-3.114-7.066-6.382-10.326-12.358-10.326c-6.647,0-11.004,4.622-11.004,11.954v72.398c0,6.109,3.812,9.643,9.245,9.643
                                            c5.153,0,8.965-3.534,8.965-9.643v-44.554h0.67l14.398,33.138c2.848,6.522,5.167,8.428,9.775,8.428
                                            c4.622,0,6.926-1.906,9.789-8.428l14.258-33.138h0.684v44.554c0,6.109,3.658,9.643,9.091,9.643c5.432,0,9.105-3.534,9.105-9.643
                                            v-72.398C276.486,256.59,272.269,251.968,265.621,251.968z"
                />
                <path
                  class="st0"
                  d="M356.363,293.806h-19.02c-5.153,0-8.42,3.121-8.42,7.876c0,4.755,3.268,7.876,8.42,7.876h6.256
                                            c0.545,0,0.81,0.272,0.81,0.816c0,3.533-0.266,6.654-1.089,9.098c-1.9,5.844-7.737,9.51-14.803,9.51
                                            c-8.015,0-13.043-3.938-15.068-10.187c-1.089-3.393-1.494-7.876-1.494-19.83c0-11.953,0.406-16.296,1.494-19.696
                                            c2.025-6.382,6.927-10.32,14.802-10.32c5.977,0,10.459,1.899,13.993,6.786c2.709,3.805,5.432,4.895,8.825,4.895
                                            c5.028,0,9.091-3.666,9.091-8.965c0-2.171-0.67-4.078-1.76-5.977c-4.888-8.287-15.207-14.397-30.149-14.397
                                            c-16.436,0-29.199,7.471-33.962,22.412c-2.038,6.515-2.583,11.682-2.583,25.262c0,13.581,0.545,18.74,2.583,25.262
                                            c4.762,14.942,17.526,22.413,33.962,22.413c16.436,0,28.921-8.288,33.683-23.09c1.634-5.16,2.304-12.77,2.304-20.919v-0.95
                                            C364.238,296.654,361.39,293.806,356.363,293.806z"
                />
              </g>
            </svg>
          </span>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row">
  {% for item in page %}
  <div class="col-lg-12 col-xl-6 col-xxl-4">
    <div class="card">
      <div class="card-body">
        <div class="row m-b-30">
          <div class="col-12">
            <div class="new-arrival-product mb-4 mb-xxl-4 mb-md-0">
              <div class="new-arrivals-img-contnent">
                <a href="{% url 'operation:object-list-scan-id-detail' scan_id=item.scan_id %}">
                  <img class="img-fluid" src="data:image/png;base64,{{ crop_img_list|get_value_from_dict:item.scan_id }}" alt="" />
                </a>
              </div>
              <div class="new-arrival-content position-relative">
                <ul class="list-group list-group-flush">
                  <li class="list-group-item d-flex px-0 justify-content-between">
                    <strong>scan_id</strong>
                    <a href="{% url 'operation:object-list-scan-id-detail' scan_id=item.scan_id %}">
                      <span class="mb-0" style="font-size: 14px;">{{ item.scan_id }}</span>
                    </a>
                  </li>                
                  <li class="list-group-item d-flex px-0 justify-content-between">
                    <strong>User</strong>
                    <a href="{% url 'operation:object-list-user-id-detail' user_id=item.user_id %}">
                      <span class="mb-0" style="font-size: 14px;">
                        {{ item.username }}
                      </span>
                    </a>
                  </li>
                  <li class="list-group-item d-flex px-0 justify-content-between">
                    <strong>shire</strong>
                    <span class="mb-0">{{ item.shire }}</span>
                  </li>
                  <li class="list-group-item d-flex px-0 justify-content-between">
                    <strong>Created</strong>
                    <span class="mb-0">{{ item.created_at| date:"y-m-d H:i:s" }}</span>
                  </li>
                  <li class="list-group-item d-flex px-0 justify-content-between">
                    <strong>Geohash</strong>
                    <span class="mb-0" data-bs-toggle="modal" data-bs-target="#{{ item.geohash }}" >{{ item.geohash }}</span>
                    <!-- Modal -->
                    <div class="modal fade" id="{{ item.geohash }}">
                      <div class="modal-dialog" role="document">
                          <div class="modal-content">
                              <div class="modal-header">
                                  <h5 class="modal-title">{{ item.geohash }}</h5>
                                  <button type="button" class="btn-close" data-bs-dismiss="modal">
                                  </button>
                              </div>
                              <div class="modal-body">
                                <iframe src="https://geohash.softeng.co/{{ item.geohash }}" width="100%" height="400" frameborder="0"></iframe>
                              </div>
                              <div class="modal-footer">
                                  <button type="button" class="btn btn-danger light" data-bs-dismiss="modal">Close</button>
                              </div>
                          </div>
                      </div>
                    </div>
                  </li>
                  <li>
                    <div class="accordion accordion-primary" id="accordion-{{ item.scan_id }}">
                      <div class="accordion-item">
                        <div
                          class="accordion-header rounded-lg collapsed"
                          id="heading{{ item.scan_id }}"
                          data-bs-toggle="collapse"
                          data-bs-target="#collapse{{ item.scan_id }}"
                          aria-controls="collapse{{ item.scan_id }}"
                          aria-expanded="false"
                          role="button"
                        >
                          <span class="accordion-header-icon"></span>
                          <span class="accordion-header-text">META DATA</span>
                          <span class="accordion-header-indicator"></span>
                        </div>
                        <div
                          id="collapse{{ item.scan_id }}"
                          class="collapse"
                          aria-labelledby="heading{{ item.scan_id }}"
                          data-bs-parent="#accordion-{{ item.scan_id }}"
                          style=""
                        >
                          <div class="accordion-body">
                            <div
                              id="meta-table-{{ item.scan_id }}"
                              class="dz-scroll height370"
                            >
                            <ul class="list-group list-group-flush">
                              {% for key, value in item.meta_data.items %}
      
                              <li class="list-group-item d-flex px-0 justify-content-between">
                                <strong>{{ key }}</strong>
                                <span class="mb-0">{{ value }}</span>
                              </li>
                              {% endfor %}
                            </ul>                      
      
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
  <ul class="pagination">
    {% if page.has_previous %}
      <li class="page-item page-indicator">
        <a class="page-link" href="?page={{ page.paginator.page_range.0 }}">
          <i class="la la-angle-left"></i>
        </a>
      </li>
    {% endif %}

    {% for page_num in page.paginator.page_range %}
      {% with data_number=page.number|add:"-0" %}
        {% if page_num >= data_number|add:"-5" and page_num <= data_number|add:"5" %}
          <li class="page-item{% if page_num == data_number %} active{% endif %}">
            <a class="page-link" href="?page={{ page_num }}">{{ page_num }}</a>
          </li>
        {% endif %}
      {% endwith %}
    {% endfor %}

    {% if page.has_next %}
      <li class="page-item page-indicator">
        <a class="page-link" href="?page={{ page.paginator.page_range|last }}">
          <i class="la la-angle-right"></i>
        </a>
      </li>
    {% endif %}
  </ul>   
</div>
{% endblock %}